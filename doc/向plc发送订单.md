```mermaid
flowchart TD
    A[开始] --> B[发送订单数据到PLC寄存器]
    B --> C[循环读取PLC状态寄存器]
    C --> D{状态值判断}
    D -- 状态=2 --> E[清除状态, 发送下一订单]
    D -- 状态=3 --> F[报警并停止]
    D -- 状态=1 --> C
    E --> C
    F --> G[结束]
    C --> G[结束]